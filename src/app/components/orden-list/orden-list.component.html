<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Historial de Órdenes</h3>
    <div class="d-flex gap-2">
      <input type="text" [(ngModel)]="filtroRut" class="form-control" placeholder="Buscar por RUT...">
      <button class="btn btn-secondary" (click)="buscarPorRut()">Buscar</button>
      <button class="btn btn-outline-secondary" (click)="filtroRut=''; cargarOrdenes()">Limpiar</button>
    </div>
  </div>

  <table class="table table-striped border shadow-sm">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Médico</th>
        <th>Observaciones</th>
        <th>Estado</th>
        <th class="text-center">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let orden of ordenes"> 
        <td>{{ orden.idOrdenAnalisis }}</td>
        <td>{{ orden.medicoSolicitante }}</td>
        <td>{{ orden.observaciones }}</td>
        <td>
          <span class="badge" [ngClass]="orden.estado === 'PENDIENTE' ? 'bg-warning' : 'bg-success'">
            {{ orden.estado }}
          </span>
        </td>
        <td class="text-center">
          <button class="btn btn-primary btn-sm me-2" [routerLink]="['/editar', orden.idOrdenAnalisis]">
            Editar
          </button>
          <button class="btn btn-danger btn-sm" (click)="borrarOrden(orden.idOrdenAnalisis)">
            Eliminar
          </button>
        </td>
      </tr>

      <tr *ngIf="ordenes.length === 0">
        <td colspan="5" class="text-center text-muted">No se encontraron órdenes registradas.</td>
      </tr>
    </tbody>
  </table>
</div>